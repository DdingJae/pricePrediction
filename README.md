# 주제
텐서플로우를 이용한 다변인 선형회귀를 이용한 가격예측 프로그램 
<br>
LSTM 딥러닝을 이용한 한달치 가격 예측 그래프

## 설계도
![4](./SampleImage/4.PNG) 

## 개발 환경
```
JupyterNotebook (python 3.6)
PyCharm IDE (python 3.6)
Flask Web Server
AWS EC2
```

## 기술 스택
```
Tensorflow 
Keras
```

## Web Site
https://

## 텐서플로우 소개 
```
다변인 선형회귀를 이용하여 미래가격을 예측 합니다.
변인들을 피어슨 상관계수를 이용해 판별하여 
평균온도, 최저온도, 최고온도, 강수량, 운량, 습도, 일조시간을 변인으로 사용합니다.
경사하강 라이브러리를 이용하며 학습횟수를 조절하며 가격을 예측합니다.
```

## LSTM 소개
```
LSTM은 RNN의 일종으로 인공신경망을 이용한 딥러닝 학습방법이며 이를 이용해 가격을 예측합니다.
데이터를 여러개의 시퀀스로 나누고 시퀀스별 학습결과를 예측하는것을 반복한다.
EX) 1-50을 이용해 51을 예측하고 2-51을 이용해 52를 예측하는것을 반복하여 미래의 값을 예측합니다.
여기서 1-50에 해당하는 값과 학습률을 조정하며 최적의 값을 예측합니다.
먼 미래의 가격을 예측하기 위해 실 데이터 값 이후 예측한 값을 실 데이터 시트에 붙여넣음으로서 먼 미래를 예측합니다.
```

## 피어슨 상관계수
```
피어슨 상관계수를 이용하여 연관이 높은 변인만을 추출하여 사용합니다.
상관계수는 -1 ~ 1 사이의 값이 나오며 절댓값 1에 가까울 수록 관계가 밀접하며 0에 가까울 수록 관계가 없다.
상관계수를 이용해 변인들을 확인해본 결과, 습도가 0.9 운량과 일조량은 0.8 정도가 나왔다.
따라서 변인으로서 적합하다 판단하여, 변인으로 추가해 학습하였다.
```

## 서버 실행
```
# 깃 허브에서 소스코드를 다운로드 받습니다.
https://github.com/pym7857/pricePrediction.git

# 받은 프로젝트 폴더로 이동합니다.
cd pricePrediction

# 플라스크 웹 서버 폴더로 이동합니다.
cd "Web"

# 웹 서버를 실행합니다.
python server.py
```

## 텐서플로우 데이터 학습 모델 생성
```
# 프로젝트 폴더에서 파이썬 폴더로 이동합니다.
cd "Python Code"

# 엑셀(Excel) 파일로 학습을 수행합니다.
python offline_save.py

# (옵션) 학습된 데이터를 확인합니다.
python "user_input.py"
>> 평균 온도: -2.7
>> 최저 온도: -6.6
>> 최고 온도: 2.0
>> 강수량:  0.1
[2000.2086]

# 이후에 생성된 모델 파일을 웹 서버의 model 폴더에 붙여넣기 하면 적용됩니다.
```

## LSTM 기능
```
# 특정 날짜를 입력하면 해당 날짜의 가격 출력 기능 
# 미래의 예측값을 그래프의 형태로 출력
```

## 핵심사항
```
* 텐서플로우
# offline_save.py: 다변인 선형회귀 모델 개발 & 데이터 저장 (model 폴더에 저장)
# user_input.py: 데이터 불러오기 & 사용자 입력
# Flask의 폴더는 model / static / templates로 나누어 구성 
# index.html에서 데이터 입력부분은 form 태그로 POST 방식으로 데이터 전송
# server.py: 플라스크(Flask)를 이용해 웹서버 연동 (port:5000)

* LSTM
설명
```

## AWS EC2를 이용해 hosting
```
# 1. EC2 인스턴스 생성, 키 획득
# 2. 제공받은 키를 이용하여 SSH 명령어를 사용해 접속
# 3. 깃 클론을 이용해 파이썬 코드를 불러와 관리자 권한으로 실행
# 4. 서버 배포를 위해 인스턴스 보안설정에 인바운드 규칙에 포트번호 5000번을 추가
# 5. 인스턴스에서 제공하는 public IP/DNS를 통해 접속 가능 
```

<br>
<br>
